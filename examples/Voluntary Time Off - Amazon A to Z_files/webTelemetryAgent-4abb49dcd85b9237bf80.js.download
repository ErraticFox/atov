(()=>{"use strict";var i={466:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ContextData=void 0;const r=e(966);class i{constructor(t){this.contextData=(0,r.encode)(t)}getDataPair(){return{"data-pxt-telemetry-context":this.contextData}}}i.dataAttribute="data-pxt-telemetry-context",n.ContextData=i},710:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DataPxtTelemetryEvents=void 0;const r=e(966);n.DataPxtTelemetryEvents=class{constructor(t){this.eventAttribute="data-pxt-telemetry-events",this.eventAttributeValue=(0,r.encode)(t)}getEventAttribute(){return this.eventAttribute}getEventAttributeValue(){return this.eventAttributeValue}}},955:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PxtTelemetryAssetIntegratedWebClient=void 0;const r=e(710),i=e(582),o=e(466);n.PxtTelemetryAssetIntegratedWebClient=class{constructor(t,n,e,r,i,o,a,u,s,c,h,f,l,d){this.namespace=t,this.pxtTelemetryWindowConfigHelper=n,this.sendImperative=e,this.sendImperativeExplicitPath=r,this.markPageImpressionImpl=i,this.collectPathsWindow=o,this.collectContextPathsWindow=a,this.describeActorImplementation=u,this.describeSourceImplementation=s,this.updateSourceImplementation=c,this.__unstable_sendImperativeImplementation=h,this.__unstable_domContextProviderImplementation=f,this.__unstable_experimentationProviderImplementation=l,this.getPageImpressionIdImpl=d,this.__unstable_sendImperativeEvent=(t,n)=>{try{this.__unstable_sendImperativeImplementation()(t,this.namespace,n)}catch(t){}},this.logger={debug:(t,n)=>this.emitLog("debug",t,n),info:(t,n)=>this.emitLog("info",t,n),warn:(t,n)=>this.emitLog("warn",t,n),error:(t,n)=>this.emitLog("error",t,n)}}describeEvents(...t){var n="string"==typeof t[0]?[{triggerResourceNames:[t[0]],events:t.slice(1)}]:t;return new r.DataPxtTelemetryEvents(n)}__unstable_describeContext(...t){return new o.ContextData(t).getDataPair()}sendImperativeEventsExplicitPath(...t){try{this.sendImperativeExplicitPath()(...t)}catch(t){}}sendImperativeEvents(...t){try{this.sendImperative()(...t.map(({event:t,metaPayload:n})=>({event:t,metaPayload:{namespacePath:[this.namespace],...n}}),this))}catch(t){}}get __unstable_domContextProvider(){try{return this.__unstable_domContextProviderImplementation()}catch(t){return{get:()=>[]}}}getLitmusTreatmentAndRecordTrigger(t,n){try{return this.__unstable_experimentationProviderImplementation().getTreatmentAssignmentAndRecordTrigger(t,this.namespace,n)}catch(t){return null}}async getLitmusTreatmentAndRecordTriggerWithDynamicAllocation(t,n){try{return await this.__unstable_experimentationProviderImplementation().getTreatmentAssignmentAndRecordTriggerWithDynamicAllocation(t,this.namespace,n)}catch(t){return null}}sendCriticalFeatureDuration(t,n){try{this.sendImperativeEvents({event:{resourceName:"arn:pxt:telemetry:event:core:timetocriticalfeature:1.0.0",payload:{durationMilliseconds:n}},metaPayload:{scopePath:t}})}catch(t){}}disableAutomaticPageImpressionTracking(){try{this.pxtTelemetryWindowConfigHelper.disableAutomaticPageImpressionTracking()}catch(t){}}markPageImpression(t){try{this.markPageImpressionImpl()(t)}catch(t){}}reactPortalTelemetryCompatibilityPatch(t){let n;try{n=this.collectContextPathsWindow()}catch(t){n=void 0}return(0,i.reactPortalTelemetryCompatibilityPatchImplementation)(n,t)}describeActor(t){try{this.describeActorImplementation()(t)}catch(t){}}describeSource(t){try{this.describeSourceImplementation()(t)}catch(t){}}updateSource(t){try{this.updateSourceImplementation()(t)}catch(t){}}collectPaths(t){try{return this.collectPathsWindow()(t)}catch(t){}}collectContextPaths(t){try{return this.collectContextPathsWindow()(t)}catch(t){}}emitLog(t,n,e){try{this.sendImperativeEvents({event:{resourceName:"arn:pxt:telemetry:event:core:structuredlog:1.0.0",payload:{level:t,message:n.message,stackTrace:n.stackTrace,properties:n.properties}},metaPayload:null!=e?e:{scopePath:[]}})}catch(t){}}getPageImpressionId(){try{return this.getPageImpressionIdImpl()()}catch(t){}}}},479:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0});const e={automaticPageImpressionTrackingEnabled:!(n.PxtTelemetryWindowConfigHelper=void 0)};n.PxtTelemetryWindowConfigHelper=class{constructor(t){this.windowGetter=t,this.disableAutomaticPageImpressionTracking=()=>{var t=this.windowGetter();void 0===t?console.warn("Cannot disable automatic page impressions from the server. Please call disableAutomaticPageImpressionTracking clientside"):(t.PxtTelemetryConfig||(t.PxtTelemetryConfig=e),t.PxtTelemetryConfig.automaticPageImpressionTrackingEnabled=!1)}}}},966:(t,n)=>{function e(t){return btoa(function(e){var t=Uint16Array.from({length:e.length},(t,n)=>e.charCodeAt(n)),t=new Uint8Array(t.buffer);let n="";return t.forEach(t=>{n+=String.fromCharCode(t)}),n}(t))}Object.defineProperty(n,"__esModule",{value:!0}),n.encode=void 0,n.encode=function(t){return e(JSON.stringify(t))}},856:(t,n,e)=>{n.m8=void 0;var r=e(185);Object.defineProperty(n,"m8",{enumerable:!0,get:function(){return r.clientFactory}}),e(582)},582:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.reactPortalTelemetryCompatibilityPatch=n.reactPortalTelemetryCompatibilityPatchImplementation=void 0;const r=e(966);function i(t,n){if(t)try{var e=t(n);return{"data-pxt-telemetry-context-patch":(0,r.encode)(e)}}catch{}return{}}n.reactPortalTelemetryCompatibilityPatchImplementation=i,n.reactPortalTelemetryCompatibilityPatch=function(t){var n;return i(null==(n=window.PxtTelemetry)?void 0:n.collectContextPaths,t)}},185:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clientFactory=void 0;const r=e(955),i=e(479);n.clientFactory=function(t){var n=new i.PxtTelemetryWindowConfigHelper(()=>window);return new r.PxtTelemetryAssetIntegratedWebClient(t,n,()=>window.PxtTelemetry.sendImperative,()=>window.PxtTelemetry.sendImperativeExplicitPath,()=>window.PxtTelemetry.markPageImpression,()=>window.PxtTelemetry.collectPaths,()=>window.PxtTelemetry.collectContextPaths,()=>window.PxtTelemetry.describeActor,()=>window.PxtTelemetry.describeSource,()=>window.PxtTelemetry.updateSource,()=>window.PxtTelemetry.__unstable_sendImperative,()=>window.PxtTelemetry.__unstable_domContextProvider,()=>window.PxtTelemetry.__unstable_experimentation,()=>window.PxtTelemetry.getPageImpressionId)}}},e={};function r(t){var n=e[t];return void 0!==n||(n=e[t]={exports:{}},i[t](n,n.exports,r)),n.exports}{var M=["https://atoz.amazon.work/home","https://essportal.integ.amazon.com/home","https://atoz.integ.amazon.com/home"],k=(n.prototype.devToolsPermitted=function(){return"true"===this.commonConfig.deploy.devToolsPermitted},n);function n(t){this.commonConfig=t}var o={build:{buildId:"2026-01-12T15:19:00.034Z"},deploy:{devToolsPermitted:"true",cdnOrigin:"https://prod.telemetry.pxt.amazon.dev",stage:"prod"}},F=o.deploy.cdnOrigin.concat("/e"),s=o.build.buildId,c=encodeURIComponent,Z=7e3,a=["error","warn","log","info"];function H(){}var z=new function(r,t){var i=this,o=a.indexOf(t);a.forEach(function(t,n){var e;i[t]=n<=o&&null!=(e=r[t])?e:H})}(console,function(){try{return window.localStorage.getItem("PXT_TELEMETRY_LOG_LEVEL")}catch(t){}}());function f(n,t){var e,r="[pxtt_err_tag:".concat(null!=t?t:0,"]:");try{var i=null!=(e=function(t){switch(t){case 0:case 1:return t}}(n))?e:0,o=t,a=n,u=F+"?c="+i;try{null!=o&&(u+="&t="+o),null!=s&&(u+="&tv="+c(s)),null!=a&&(u+="&msg="+c(""+a),a instanceof Error)&&a.stack&&(u+="&st="+c(""+a.stack.slice(0,Z)))}catch(a){}(new Image).src=u,z.error(r,n)}catch(t){console.error(r,n)}}function u(t,n){try{t()}catch(t){f(t,n)}}var h=function(t,n){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}))(t,n)};function J(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var l=function(){return(l=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function d(t,a,u,s){return new(u=u||Promise)(function(e,n){function r(t){try{o(s.next(t))}catch(t){n(t)}}function i(t){try{o(s.throw(t))}catch(t){n(t)}}function o(t){var n;t.done?e(t.value):((n=t.value)instanceof u?n:new u(function(t){t(n)})).then(r,i)}o((s=s.apply(t,a||[])).next())})}function v(r,i){var o,a,u,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},c={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function t(e){return function(t){var n=[e,t];if(o)throw new TypeError("Generator is already executing.");for(;s=c&&n[c=0]?0:s;)try{if(o=1,a&&(u=2&n[0]?a.return:n[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,n[1])).done)return u;switch(a=0,(n=u?[2&n[0],u.value]:n)[0]){case 0:case 1:u=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,a=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3]))s.label=n[1];else if(6===n[0]&&s.label<u[1])s.label=u[1],u=n;else{if(!(u&&s.label<u[2])){u[2]&&s.ops.pop(),s.trys.pop();continue}s.label=u[2],s.ops.push(n)}}n=i.call(r,s)}catch(t){n=[6,t],a=0}finally{o=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}}function m(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),a=[];try{for(;(void 0===n||0<n--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return a}function p(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||((r=r||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function V(t,n){var e,r,i=[],o=0,a=0;try{for(var u=m(t),s=u.next();!s.done;s=u.next()){var c=s.value,h=function(n){try{return new Blob([n]).size}catch(t){return n.length}}(JSON.stringify(c));n<h?f(0,55):(n<a+h&&(o++,a=0),i[o]||(i[o]=[]),i[o].push(c),a+=h)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return i}Object.create,Object.create,y.prototype.sinkMessages=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return d(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return[4,Promise.all(V(n,36864).map(function(n){return d(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.ingestionServiceClient.sendMessages(n)];case 1:return t.sent(),[3,3];case 2:return f(t.sent(),5),[3,3];case 3:return[2]}})})}))];case 1:return t.sent(),[2]}})})};var G=y;function y(t){this.ingestionServiceClient=t}function g(t,n){n&&(console.groupCollapsed("%c".concat(t,": %c").concat(n.resourceName),"font-weight: bold","font-weight: normal"),console.log(JSON.stringify(n.payload,null,2)),console.groupEnd())}E.prototype.sinkMessages=function(){for(var n,t,e,r,i,o,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(this.shouldLog())try{for(var s=m(a),c=s.next();!c.done;c=s.next()){var h=c.value;try{o=i=r=void 0,r=(e=h).event.resourceName,i=e.meta.payload.namespacePath,o=e.meta.payload.scopePath,console.groupCollapsed("%cPXT Telemetry Event: %c".concat(r,", %cnamespacePath: %c").concat(i).concat(o?", %cscopePath: %c"+o:"%c%c"),"font-weight: bold","font-weight: normal","font-weight: bold","font-weight: normal","font-weight: bold","font-weight: normal"),g("event",e.event),e.context&&e.context.forEach(function(t){g("context",t)}),g("trigger",e.trigger),g("source",e.source),g("platform",e.platform),g("actor",e.actor),g("session",e.session),g("meta",e.meta),console.groupEnd()}catch(t){f(t,8)}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(n)throw n.error}}return Promise.resolve()};var K=E;function E(t){this.shouldLog=t}T.prototype.sinkMessages=function(){return d(this,void 0,void 0,function(){var e,r=this;return v(this,function(t){switch(t.label){case 0:return e=this.t.drainMessages(),this.i&&e.forEach(function(t){t.meta.payload.isTest=!0}),[4,Promise.all(this.o.map(function(n){return d(r,void 0,void 0,function(){return v(this,function(t){return[2,n.sinkMessages.apply(n,p([],w(e),!1))]})})}))];case 1:return t.sent(),[2]}})})};var X=T;function T(t,n,e,r,i,o){var a,u=this;this.t=t,this.o=n,this.u=e,this.h=r,this.l=i,this.v=o,this.i="true"===(null==(a=this.h.getLocalStorage("PxtTelemetryIsTest"))?void 0:a.toLowerCase()),this.u.scheduleWorkRepeatedly(function(){return u.sinkMessages()},1e4),this.v.addVisibilityChangeEventListener(function(){return u.sinkMessages()}),this.l.addUnloadEventListener(function(){return u.sinkMessages()}),this.sinkMessages()}b.prototype.getOffsetMins=function(){return(new Date).getTimezoneOffset()};var q=b;function b(t){var e=this;this.performance=t,this.getWalltimeCurrent=function(){return(new Date).toISOString()},this.getWalltimeFromOriginRelativeTime=function(t){var n=(new Date).getTime()-e.performance.now();return new Date(t+n).toISOString()}}var Y=r(856);function S(t){return"object"==typeof t&&null!=t}x.prototype.setState=function(t){return this.localStorage.setItem(this.devToolsLocalStorageKey,JSON.stringify(t)),t},x.prototype.setStateDefault=function(){return this.setState(this.defaultDevToolsState)},x.prototype.getLocalStorageStateOrWriteDefaults=function(){var t,n=this.localStorage.getItem(this.devToolsLocalStorageKey);if(null===n)return this.formattedLog("No existing dev tools state, overwriting with defaults"),this.setStateDefault();try{var e=JSON.parse(n);return S(t=e)&&"boolean"==typeof t.isMessageLoggingEnabled?e:(this.formattedLog("Unexpected shape of dev tools state, overwriting with defaults"),this.setStateDefault())}catch(t){return this.formattedLog("Dev tools state corrupt, overwriting with defaults"),this.setStateDefault()}},x.prototype.toggleMessageLogging=function(){var t=this.getLocalStorageStateOrWriteDefaults(),n=!t.isMessageLoggingEnabled;n?this.formattedLog("Message logging enabled. Buffered messages are logged in batch every 10 seconds\nPLEASE NOTE - If you aren't seeing messages, check other tabs/windows or ensure this is the only tab/window open for this origin.\nOnly a single tab/window will log messages for a given origin."):this.formattedLog("Message logging disabled."),this.setState(l(l({},t),{isMessageLoggingEnabled:n}))},x.prototype.isMessageLoggingEnabled=function(){return this.getLocalStorageStateOrWriteDefaults().isMessageLoggingEnabled},x.prototype.formattedLog=function(t){this.log("PxtTelemetry - Dev tools: ".concat(t))};var W=x;function x(t,n){var e=this;this.localStorage=t,this.log=n,this.devToolsLocalStorageKey="PxtTelemetryDevTools-580A0F91-C330-4AF4-B83D-EF728A2B0643",this.defaultDevToolsState={isMessageLoggingEnabled:!1},this.pxtTelemetryWebClient=(0,Y.m8)("dev-tools"),this.getTelemetryClient=function(){return e.pxtTelemetryWebClient}}var B="data-pxt-telemetry-",C="".concat(B,"namespace"),P="".concat(B,"scope"),I=("".concat(B,"path"),"".concat(B,"context-patch"),"".concat(B,"pageName")),$=("".concat(B,"context"),"".concat(B,"app-root")),A=("".concat(B,"track-visibility"),"atoz-screen-takeover-widget-root"),Q=(U.prototype.findElementBFS=function(t,n){for(var e=[t],r=0;;r++){if(r>=e.length)return null;var i=e[r];if(n(i))return i;e.push.apply(e,p([],w(Array.from(i.children).filter(function(t){return t instanceof HTMLElement}).map(function(t){return t})),!1))}},U);function U(t,n){var i=this;this.document=t,this.window=n,this.getEsspRoot=function(){return i.document.getElementById(A)},this.getAppRoot=function(){return i.document.querySelector(".app-root[id^=".concat("atoz-","][id$=").concat("-root","]:not([id=").concat(A,"])"))},this.getEmployeeId=function(){var t=i.getEsspRoot();return(null==t?void 0:t.getAttribute("data-authenticated-employee-id"))||(null==t?void 0:t.getAttribute("data-employee-id"))||void 0},this.getPreferredLanguage=function(){var t=i.getEsspRoot();return(null==t?void 0:t.getAttribute("data-locale"))||void 0},this.getFeatureName=function(){var t=i.getAppRoot(),t=null==t?void 0:t.getAttribute("id");return null==t?void 0:t.substring("atoz-".length,t.length-"-root".length)},this.isExternal=function(){var t=i.getAppRoot();return"true"===(null==t?void 0:t.getAttribute("data-external"))||"false"!==(null==t?void 0:t.getAttribute("data-external"))&&void 0},this.getElementAttributesToRoot=function(t){for(var n,e,r=[];t;){var i={};try{n=void 0;for(var o=m(t.getAttributeNames()),a=o.next();!a.done;a=o.next()){var u=a.value,s=t.getAttribute(u);s&&(i[u]=s)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}if(0<Object.keys(i).length&&r.push(i),!t.parentElement)break;t=t.parentElement}return r.reverse()},this.isDocumentVisible=function(){return"visible"===i.document.visibilityState},this.getTelemetryGlobalNamespaceAndScope=function(){var t={namespace:void 0,scope:""},n=null!=(n=i.findElementBFS(i.document.documentElement,function(t){return t.hasAttribute($)}))?n:i.document.documentElement,n=i.findElementBFS(n,function(t){return t.hasAttribute(C)}),e=n?i.findElementBFS(n,function(t){return t.hasAttribute(P)}):null;return n&&(t.namespace=null!=(n=n.getAttribute(C))?n:void 0),e&&(t.scope=null!=(n=e.getAttribute(P))?n:""),t},this.getReadyState=function(){return i.document.readyState},this.getCookie=function(t){return n=i.document.cookie,e=t,null==(r=n.split(";").find(function(t){return t.trim().startsWith("".concat(e,"="))}))?void 0:r.split("=")[1];var n,e,r},this.getPageName=function(){var t=i.document.querySelector("[".concat(I,"]"));return t&&null!=(t=t.getAttribute(I))?t:void 0},this.getLocalStorage=function(t){return i.window.localStorage.getItem(t)},this.setLocalStorage=function(t,n){return i.window.localStorage.setItem(t,n)},this.getCurrentUrl=function(){return i.window.location.href},this.getCurrentUrlWithoutQueryParams=function(){var t=new URL(i.getCurrentUrl());return"".concat(t.protocol,"//").concat(t.host).concat(t.pathname)},this.getRequestId=function(){var t=i.document.getElementsByName("pxt-telemetry-trace-request-id");return 0!==t.length&&null!=(t=t[0].getAttribute("content"))?t:void 0},this.getTelemetryToken=function(){var t;return null!=(t=null==(t=i.document.querySelector('meta[name="pxt-telemetry-token"]'))?void 0:t.getAttribute("content"))?t:void 0},this.isTest=function(){var t;return"true"===(null==(t=i.getLocalStorage("PxtTelemetryIsTest"))?void 0:t.toLowerCase())}}new Date;var tt=function(t){var n=this;this.element=t,this.addUnloadEventListener=function(t){n.element.addEventListener("beforeunload",t,{passive:!0,capture:!0})},this.addLoadEventListener=function(t){n.element.addEventListener("load",t,{passive:!0,capture:!0})},this.addPopStateEventListener=function(t){n.element.addEventListener("popstate",t,{passive:!0,capture:!0})},this.addErrorListener=function(t){n.element.addEventListener("error",t,{passive:!0,capture:!0})}},nt=function(t){var n=this;this.element=t,this.addClickEventListener=function(t){n.element.addEventListener("click",t,{passive:!0,capture:!0})},this.addAuxClickEventListener=function(t){n.element.addEventListener("auxclick",t,{passive:!0,capture:!0})},this.addContextMenuClickEventListener=function(t){n.element.addEventListener("contextmenu",t,{passive:!0,capture:!0})},this.addVisibilityChangeEventListener=function(t){n.element.addEventListener("visibilitychange",t,{passive:!0,capture:!0})},this.addChangeEventListener=function(t){n.element.addEventListener("change",t,{passive:!0,capture:!0})}},et="A-TO-Z-LITMUS-TREATMENT_OVERRIDES";function rt(t){if(t.isTest()){var n,e=t.getLocalStorage(et);if(e)try{var r=JSON.parse(e);return"object"==typeof(n=r)&&Object.entries(n).every(function(t){var n=w(t,2),n=(n[0],n[1]);return"string"==typeof n||null===n})?r:{}}catch(t){f(t,53)}}return{}}Object.defineProperty(O.prototype,"AtoZContext",{get:function(){return this.w.AtoZContext},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"LitmusTreatments",{get:function(){return this.w.LitmusTreatments},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"AtoZKrakenCurrentApp",{get:function(){return this.w.AtoZKrakenCurrentApp},enumerable:!1,configurable:!0}),O.prototype.getCurrentKrakenApp=function(){return this.AtoZKrakenCurrentApp},Object.defineProperty(O.prototype,"enabledFeatures",{get:function(){var t;return null!=(t=null==(t=null==(t=this.AtoZContext)?void 0:t.employee)?void 0:t.enabledFeatures)?t:[]},enumerable:!1,configurable:!0});var it=O;function O(t,n){var e=this;this.w=t,this.h=n,this.getEmployeeId=function(){var t;return null==(t=null==(t=e.AtoZContext)?void 0:t.employee)?void 0:t.employeeId},this.getLitmusTreatments=function(){var t,r=null!=(t=null!=(t=null==(t=null==(t=e.AtoZContext)?void 0:t.employee)?void 0:t.activeExperiments)?t:e.LitmusTreatments)?t:[],i=rt(e.h);return Object.keys(i).forEach(function(n){var t,e=r.findIndex(function(t){return t.experimentId==n});-1==e?(t={experimentId:n,idMap:{personId:""},randomizedOn:["personId"],randomizationAlgorithm:"OVERRIDE",randomizedAt:Date.now(),treatmentName:i[n]},r.push(t)):(r[e].treatmentName=i[n],r[e].randomizationAlgorithm="OVERRIDE")}),r},this.getPreferredLanguage=function(){var t;return null==(t=null==(t=e.AtoZContext)?void 0:t.employee)?void 0:t.localePreferences.languageCode},this.isExternal=function(){var t;return null==(t=e.AtoZContext)?void 0:t.external},this.isProd=function(){var t=null==(t=null==(t=e.AtoZContext)?void 0:t.stage)?void 0:t.toLowerCase();return!!t&&["prod","production"].includes(t)},this.isKrakenEnv=function(){return!0===e.w.AtoZKrakenEnv},this.getPersona=function(){var t;return"string"!=typeof(null==(t=e.AtoZContext)?void 0:t.persona)||null==(t=null==(t=e.AtoZContext)?void 0:t.persona)?void 0:t.substring(0,128)}}var D="PXT_TELEMETRY_INGESTION_BATCH_85e900a5-6382-452d-b1e7-915896f7496a",ot=(_.prototype.handleResponse=function(i,o){return d(this,void 0,void 0,function(){var n,e,r;return v(this,function(t){switch(t.label){case 0:if(!o)return f(0,14),[2];n=o.batchKey,e=o.batch,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i];case 2:return r=t.sent(),[3,4];case 3:return f(t.sent(),15),[3,4];case 4:return null!=r&&r.ok?this.ingestionServiceBatchDeliveryRetryPersistence.removeBatch(n):2592e6<(new Date).getTime()-new Date(e.meta.newestMessageCreatedAt).getTime()?(this.ingestionServiceBatchDeliveryRetryPersistence.removeBatch(n),f(0,16)):100<e.meta.longLivedAttempts?(this.ingestionServiceBatchDeliveryRetryPersistence.removeBatch(n),f(0,17)):this.ingestionServiceBatchDeliveryRetryPersistence.incrementBatchAttempts(n),[2]}})})},_);function _(t,n,e,r,i,o,a,u,s){var c=this;this.fetch=t,this.ingestionDomainName=n,this.serialize=e,this.datetime=r,this.scheduler=i,this.ingestionServiceBatchDeliveryRetryPersistence=o,this.lockManager=a,this.randomUUIDGenerator=u,this.domHelper=s,this.sendMessages=function(i){return d(c,void 0,void 0,function(){var e,r,n=this;return v(this,function(t){switch(t.label){case 0:return e=this.dispatchBatch(i),r="".concat(D,"_").concat(this.randomUUIDGenerator.generate()),[4,this.lockManager.request(r,function(){return d(n,void 0,void 0,function(){var n;return v(this,function(t){switch(t.label){case 0:return n=this.ingestionServiceBatchDeliveryRetryPersistence.storeUndeliveredBatch(i,r),[4,this.handleResponse(e,n&&{batchKey:r,batch:n})];case 1:return t.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})},this.dispatchBatch=function(t){var n=c.datetime.getWalltimeCurrent(),e=c.domHelper.getTelemetryToken(),r=t.map(function(t){return c.addDataToMessage(t,n,e)});return c.fetch(c.ingestionDomainName,{method:"POST",keepalive:!0,headers:{"Content-Type":"text/plain"},body:c.serialize(r)})},this.addDataToMessage=function(t,n,e){return l(l({},t),{enrichmentToken:e,meta:l(l({},t.meta),{payload:l(l({},t.meta.payload),{sentAt:n})})})},this.retryUndeliveredBatches=function(){return d(c,void 0,void 0,function(){var n=this;return v(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.ingestionServiceBatchDeliveryRetryPersistence.getBatches().map(function(t){var e=t.batchKey,r=t.batch;return d(n,void 0,void 0,function(){var n=this;return v(this,function(t){switch(t.label){case 0:return[4,this.lockManager.request(e,function(){return d(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.ingestionServiceBatchDeliveryRetryPersistence.hasBatch(e)?[4,this.handleResponse(this.dispatchBatch(r.messages),{batchKey:e,batch:r})]:[2];case 1:return t.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})}))];case 1:return t.sent(),[2]}})})},this.scheduler.scheduleWorkRepeatedly(this.retryUndeliveredBatches,3e4)}N.prototype.setBatch=function(t,n){return this.localStorageManager.putItem(t,JSON.stringify(n))},N.prototype.asTelemetryBatch=function(t){return{messages:t,meta:{longLivedAttempts:0,retryBufferFormatVersion:"1",newestMessageCreatedAt:t.reduce(function(t,n){return n.meta.payload.createdAt>t?n.meta.payload.createdAt:t},new Date(0).toISOString())}}},N.prototype.isATelemetryBatch=function(t){return S(t)&&!!t.messages&&!!t.meta},N.prototype.incrementBatchAttempts=function(n){var t,e=this.localStorageManager.getItem(n);if(null!=e){try{t=JSON.parse(e)}catch(t){return void this.localStorageManager.removeItem(n)}this.isATelemetryBatch(t)?this.setBatch(n,l(l({},t),{meta:l(l({},t.meta),{longLivedAttempts:t.meta.longLivedAttempts+1})})):this.removeBatch(n)}};var at=N;function N(t){var i=this;this.localStorageManager=t,this.storeUndeliveredBatch=function(t,n){var e=i.asTelemetryBatch(t);if(i.setBatch(n,e))return e},this.getBatches=function(){return i.localStorageManager.filterPrefix(D).map(function(t){var n,e=w(t,1)[0],r=i.localStorageManager.getItem(e);if(null!=r){try{n=JSON.parse(r)}catch(t){return f(t,13),void i.localStorageManager.removeItem(e)}if(i.isATelemetryBatch(n))return{batchKey:e,batch:n};i.localStorageManager.removeItem(e)}}).filter(function(t){return!(null==t||!t.batchKey)})},this.removeBatch=function(t){i.localStorageManager.removeItem(t)},this.hasBatch=function(t){return!(null==i.localStorageManager.getItem(t))},this.localStorageManager.registerPrefix(D,function(t){try{var n=JSON.parse(t);return i.isATelemetryBatch(n)?n.messages.every(function(t){return!!t.trigger.resourceName.startsWith("arn:pxt:telemetry:trigger:core:activity:")&&"PING"===t.trigger.payload.activityType}):(f(0,11),!0)}catch(t){return f(t,12),!1}})}st.prototype.time=function(t,n){var e,r="".concat(n,"-start"),i="".concat(n,"-end"),o="".concat(n,"-measure"),a={implementation:"PxtTelemetryPerfTimeSync"};try{this.performance.mark(r,{detail:a})}catch(t){f(t,19)}try{e={status:"ok",result:t(),exception:void 0}}catch(t){f(t,20),e={status:"notOkay",result:void 0,exception:t}}try{this.performance.mark(i,{detail:l(l({},a),!!e.exception&&{exception:!!e.exception})}),this.performance.measure(o,{start:r,end:i,detail:l(l({},a),!!e.exception&&{exception:!!e.exception})})}catch(t){}if("notOkay"===e.status)throw e.exception;return{start:r,end:i,duration:o,result:e.result}};var ut=st;function st(t){this.performance=t}const j={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const pt=new Uint8Array(16),L=[];for(let t=0;t<256;++t)L.push((t+256).toString(16).slice(1));function ct(t,n=0){return(L[t[n+0]]+L[t[n+1]]+L[t[n+2]]+L[t[n+3]]+"-"+L[t[n+4]]+L[t[n+5]]+"-"+L[t[n+6]]+L[t[n+7]]+"-"+L[t[n+8]]+L[t[n+9]]+"-"+L[t[n+10]]+L[t[n+11]]+L[t[n+12]]+L[t[n+13]]+L[t[n+14]]+L[t[n+15]]).toLowerCase()}const yt=function(t,n,e){if(j.randomUUID&&!n&&!t)return j.randomUUID();var r=(t=t||{}).random||(t.rng||function(){if(i=i||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return i(pt);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(let t=0;t<16;++t)n[e+t]=r[t];return n}return ct(r)};function ht(t){return t.map(function(t){return JSON.stringify(t)}).join("\n")}var ft,lt=function(){this.generate=function(){return yt()}},dt=function(t,n,e){var r=this;if(this.nonRetryingFetch=t,this.sleep=n,this.options=e,this.fetch=function(u,s){return d(r,void 0,void 0,function(){var n,e,r,i,o,a=this;return v(this,function(t){switch(t.label){case 0:n=function(){return a.options.randomBackoffMsLowerLimit+Math.floor(Math.random()*(a.options.randomBackoffMsUpperLimit-a.options.randomBackoffMsLowerLimit))},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.nonRetryingFetch(u,s)];case 2:return e=t.sent(),[3,4];case 3:return r=t.sent(),r=r,[3,4];case 4:i=this.options.maxAttempts-1,t.label=5;case 5:if(null!=e&&e.ok||!(0<i))return[3,13];if(o=!0,!(o=this.options.shouldRetryPredicate&&e?this.options.shouldRetryPredicate(e):o))return[2,e];r=void 0,t.label=6;case 6:return t.trys.push([6,8,,9]),[4,this.nonRetryingFetch(u,s)];case 7:return e=t.sent(),[3,9];case 8:return o=t.sent(),r=o,[3,9];case 9:return(i--,null!=e&&e.ok)?[3,13]:[3,10];case 10:return 0<i?[4,this.sleep(n())]:[3,12];case 11:t.sent(),t.label=12;case 12:return[3,5];case 13:if(r)throw f(r,21),r;return[2,e]}})})},e.randomBackoffMsUpperLimit<=e.randomBackoffMsLowerLimit)throw new Error("randomBackoffMsUpperLimit (".concat(e.randomBackoffMsUpperLimit,") must be greater than randomBackoffMsLowerLimit (").concat(e.randomBackoffMsLowerLimit,")"))},vt=function(t,n){var e=this;this.setInterval=t,this.clearInterval=n,this.scheduleWorkRepeatedly=function(t,n){return{value:e.setInterval(function(){return t()},n)}},this.cancelScheduledWork=function(t){e.clearInterval(t.value)}},mt=function(t){var e=this;this.setTimeout=t,this.sleep=function(n){return d(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return window.setTimeout(t,n)})];case 1:return t.sent(),[2]}})})}};function R(t,n){var e=ft.call(this,t)||this;return e.config=n,e}J(R,ft=k),R.prototype.ingestionDomainName=function(){return this.config.deploy.ingestionDomainName};var wt=new R(o,{deploy:{ingestionDomainName:"https://ingestion.prod.telemetry.pxt.amazon.dev",atoZHomePageExperimentId:"174b9b12-0551-4fd2-a647-32410a8d3a1c",atoZHomePageStratifiedExperimentId:"10b2bbf0-345d-4391-9cef-b9d086b95ef2",atoZHomePageNewStratifiedExperimentId:"1bec769b-4a4e-45fa-bb85-6d1016c2b59a",experimentationRuntimeReverseProxyEndpoint:"https://atoz.amazon.work/apis",reverseProxyTenantId:"AtoZExperimentationRandomization"}});u(function(){return new ut(window.performance).time(function(){var t=window.PxtTelemetry.messageBuffer,n=new q(performance),e=new lt,r=new Q(document,window),i=new at(window.PxtTelemetry.localStorageManager),o=new mt(window.setTimeout.bind(window)),o=new dt(window.fetch.bind(window),o.sleep,{maxAttempts:3,randomBackoffMsUpperLimit:5e3,randomBackoffMsLowerLimit:1e3}),a=new vt(window.setInterval.bind(window),function(){return window.clearInterval.bind(window)}),o=(new it(window,r),new ot(o.fetch,wt.ingestionDomainName(),ht,n,a,i,navigator.locks,e,r)),n=[new G(o)],e=(wt.devToolsPermitted()&&(i=new W(window.localStorage,console.log),window.PxtTelemetry.devTools=i,n.push(new K(i.isMessageLoggingEnabled.bind(i)))),new tt(window)),o=new nt(window.document);return new X(t,n,a,r,e,o)},"pxt-telemetry-agent").result},2),u(function(){var n,t,e=window,r={deploy:{ingestionDomainName:"https://ingestion.prod.telemetry.pxt.amazon.dev",atoZHomePageExperimentId:"174b9b12-0551-4fd2-a647-32410a8d3a1c",atoZHomePageStratifiedExperimentId:"10b2bbf0-345d-4391-9cef-b9d086b95ef2",atoZHomePageNewStratifiedExperimentId:"1bec769b-4a4e-45fa-bb85-6d1016c2b59a",experimentationRuntimeReverseProxyEndpoint:"https://atoz.amazon.work/apis",reverseProxyTenantId:"AtoZExperimentationRandomization"}};void 0===r&&(r={deploy:{ingestionDomainName:"https://ingestion.prod.telemetry.pxt.amazon.dev",atoZHomePageExperimentId:"174b9b12-0551-4fd2-a647-32410a8d3a1c",atoZHomePageStratifiedExperimentId:"10b2bbf0-345d-4391-9cef-b9d086b95ef2",atoZHomePageNewStratifiedExperimentId:"1bec769b-4a4e-45fa-bb85-6d1016c2b59a",experimentationRuntimeReverseProxyEndpoint:"https://atoz.amazon.work/apis",reverseProxyTenantId:"AtoZExperimentationRandomization"}});try{null!=new URLSearchParams(e.location.search).get("optOutOfLitmusAATest")?console.log("Opting out of Litmus A/A test due to query string feature flag"):(n=e.location.href,null!=M.find(function(t){return n.startsWith(t)})&&((t=e.PxtTelemetry.__unstable_experimentation).getTreatmentAssignmentAndRecordTrigger(r.deploy.atoZHomePageExperimentId),t.getTreatmentAssignmentAndRecordTriggerWithDynamicAllocation(r.deploy.atoZHomePageStratifiedExperimentId),t.getTreatmentAssignmentAndRecordTriggerWithDynamicAllocation(r.deploy.atoZHomePageNewStratifiedExperimentId)))}catch(t){}},3)}})();